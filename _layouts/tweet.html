<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>dario berzano ~ {{ page.title }}</title>
    <meta name="robots" content="index,follow"/>
    <meta name="mssmarttagspreventparsing" content="true"/>
    <link rel="shortcut icon" href="/images/favicon.gif" type="image/gif" />
    <link rel="icon" href="/images/favicon.gif" type="image/gif" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  	<meta name="author" content="Dario Berzano"/>
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <link href="/css/syntax.css" rel="stylesheet" type="text/css" />
    <link href="/css/screen.css" media="screen" rel="stylesheet" title="paperplanes" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/css/mobile.css" media="handheld, only screen and (max-device-width: 960px)" />
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>

<script>

// Separate at this tag name
tag_name = 'h2';

// jQuery object containing what we want to paginate
container_name = 'content';

// Class name of the pages
paginator_class = tag_name + '-inner-page';

// Prefix to the name of the inner pages
paginator_prefix = 'inner-page-';

// Start numbering from H1, H2...?
start_numb_from_level = 2;  // h2


$(document).ready( function() {

  level_counters = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
  tag_name = tag_name.toUpperCase();

  // Automatic numbered anchors
  $( '#'+container_name ).children().each( function() {

    m = $(this).prop('tagName').match(/^H([0-9])$/);
    if ( m ) {
      level = parseInt(m[1]);
      if (level >= start_numb_from_level) {
        level_counters[level]++;
        level_str = ''
        for (i=start_numb_from_level; i<=level; i++) {
          level_str = level_str + level_counters[i];
          if (i != level) level_str += '-';
        }
        // $(this).text( $(this).text() + " - level: " + level_str );

        // Create new header
        new_header = $('<h'+level+'></h'+level+'>');
        new_anchor = $('<a></a>')
          .attr('name', 'sec-'+level_str)
          .attr('href', '#sec-'+level_str);
        new_header.append(new_anchor);

        $(this).contents().each( function() {
          $(this).detach().appendTo( new_anchor );
        } );

        $(this).replaceWith( $(new_header) );

      }
    }

  } );


  // I can change the DOM while iterating on it
  // http://stackoverflow.com/questions/4735604/jquery-each-behavior-if-changing-dom-within-loop

  page_num = 0;
  page = undefined;

  $( '#'+container_name ).children().each( function() {

    // Separate at tag named tag_name (i.e., H2 -- uppercase)
    if ( $(this).prop('tagName') == tag_name ) {

      page_num++;
      page = $('<div></div>')
               .addClass(paginator_class)
               .attr('id', paginator_prefix+page_num)
               .hide();
      $(this).after( page );
      $(this).detach().prependTo( page );

    }
    else if (page_num != 0) {

      // alert(in_page);
      $(this).detach().appendTo( $(page) );

    }

  } );

  // Show the correct section based on the hash written in the browser's URL

  m = window.location.hash.match(/^#sec-([0-9]+)/);
  level = (m ? parseInt(m[1]) : 1);
  $('#'+paginator_prefix+level).show();

});

</script>

  </head>
  
  <body id="www-paperplanes-de">

    <div id="head">
      <div id="header-content">
        <a href="/">
          <img src="/images/me_south_park.png" id="paperplane"/>
        </a>
        <div id="about-valign-helper">
          <div id="about">
            <h1>Hi, I'm Dario Berzano!</h1>
            <p>I work at <a href="http://cern.ch">CERN</a> as Cloud Developer and Sysadmin.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="box">
      {% if page.countsections == true %}
      <!-- h2, h3, h4 will be numbered by css -->
      <div id="content" class="countsections">
      {% else %}
      <div id="content">
      {% endif %}
        <h1 class="pagetitle">{{ page.title }}</h1>

        {{ content }}

      </div>

      <div id="inner-pagination">
        <a href="#" class="previous">Previous</a>
        <a href="#" class="next">Next</a>
      </div>
    </div>

    <div id="foot">
      <div id="footer-content"><p>Made with &hearts; by Dario Berzano. Layout forked from Mathias Meyer's <a href="http://www.paperplanes.de/">Paperplanes</a>.</p>
      </div>
    </div>

  </body>
</html>
